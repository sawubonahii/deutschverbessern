import { useState, useEffect } from 'react';
import { Mic, Book, Pen, CheckSquare, MessageSquare, Search, Lightbulb, Zap, Award, BarChart3, Rocket, ArrowRight, ArrowLeft } from 'lucide-react';
import React from 'react';

// Main App component
export default function App() {
    const [currentDayIndex, setCurrentDayIndex] = useState(0);
    const [openExercises, setOpenExercises] = useState({});

    // The core learning plan data
    const learningPlanData = [
        {
            day: '第一天',
            title: '認識德國國防新創公司',
            germanTitle: 'Tag 1: Deutsche Rüstungs-Start-ups kennenlernen',
            goal: '了解德國國防新創公司的現狀、主要產品及所面臨的早期挑戰。',
            germanGoal: 'Ziel: Den aktuellen Stand deutscher Rüstungs-Start-ups, ihre Hauptprodukte und frühen Herausforderungen verstehen.',
            tasks: [
                { type: '聽', description: '聽取文件第一頁的內容，了解德國國防新創公司如何獲得投資。', german: 'Hören Sie sich den Inhalt der ersten Seite an, um zu verstehen, wie deutsche Rüstungs-Start-ups finanziert werden.', example: '私人投資者已投入超過十億歐元。' },
                { type: '說', description: '練習用德文說出「這些公司是德國新創界的新星」。', german: 'Üben Sie, auf Deutsch zu sagen: "Sie sind die Stars in der deutschen Start-up-Szene."', example: '"Sie sind die Stars in der deutschen Start-up-Szene, junge Unternehmen der Rüstungsindustrie."' },
                { type: '讀', description: '閱讀文件第一頁，找出 ARX Robotics 和 Quantum Systems 的主要產品。', german: 'Lesen Sie die erste Seite des Dokuments und identifizieren Sie die Hauptprodukte von ARX Robotics und Quantum Systems.', example: 'ARX Robotics 開發了迷你坦克，Quantum Systems 開發了無人機。' },
                { type: '寫', description: '用德文寫下一句話，描述您對這些新創公司的第一印象。', german: 'Schreiben Sie einen Satz auf Deutsch, der Ihren ersten Eindruck von diesen Start-ups beschreibt.', example: 'Ich finde es interessant, dass junge Unternehmen in der Rüstungsindustrie aktiv sind.' }
            ],
            supplementary: {
                words: [
                    { word: 'Rüstungsindustrie', partOfSpeech: 'n.', meaning: '國防工業', example: 'Sie sind junge Unternehmen der Rüstungsindustrie.' },
                    { word: 'finanzieren', partOfSpeech: 'v.', meaning: '資助、提供資金', example: 'Sie wurden mit über einer Milliarde Euro finanziert.' },
                    { word: 'Drohne', partOfSpeech: 'n.', meaning: '無人機', example: 'Besonders gefragt sind Drohnen wie diese.' },
                    { word: 'Mini-Panzer', partOfSpeech: 'n.', meaning: '迷你坦克', example: 'ARX Robotics hat einen Mini-Panzer entwickelt.' },
                    { word: 'Privatinvestor', partOfSpeech: 'n.', meaning: '私人投資者', example: 'Die Investoren steckten 33 Millionen Euro in das Start-up.' }
                ],
                phrases: [
                    { phrase: 'auf eigenen Beinen stehen', type: '慣用語', meaning: '自立、獨立', example: 'Europa muss im Bereich Verteidigung auf eigenen Beinen stehen.' },
                    { phrase: 'sich nicht verlassen können auf', type: '片語', meaning: '無法依賴', example: 'Wir können uns nicht auf Amerika verlassen.' },
                    { phrase: 'Anklang finden bei', type: '片語', meaning: '受到...歡迎', example: 'Sie wissen nicht, ob ihre Produkte später Anklang bei Armeen finden werden.' }
                ],
                exercises: [
                    { question: '根據文件，ARX Robotics 開發的迷你坦克有什麼用途？', german: 'Welche Zwecke erfüllt der Mini-Panzer von ARX Robotics laut dem Dokument?', type: '閱讀理解', skill: '理解', answer: '用雷射干擾敵人，以及運送受傷的士兵。', germanAnswer: 'Er verwirrt Feinde mit Lasern und kann zum Transport verwundeter Soldaten eingesetzt werden.' },
                    { question: '將「歐洲必須在國防領域獨立」翻譯成德文。', german: 'Übersetzen Sie "Europa muss im Bereich Verteidigung auf eigenen Beinen stehen" ins Chinesische.', type: '德文翻譯', skill: '寫作', answer: 'Europa muss im Bereich Verteidigung auf eigenen Beinen stehen.', germanAnswer: 'Europa muss im Bereich Verteidigung auf eigenen Beinen stehen.' },
                    { question: '請解釋「Besorgniserregend finde ich」的中文意思。', german: 'Bitte erklären Sie die Bedeutung von "Besorgniserregend finde ich" auf Chinesisch.', type: '片語解釋', skill: '詞彙', answer: '我覺得這很令人擔憂。', germanAnswer: 'Ich finde das besorgniserregend.' },
                    { question: '這份文件暗示了什麼樣的國際關係變化，導致歐洲重新思考其國防政策？', german: 'Welche Veränderung in den internationalen Beziehungen wird im Dokument angedeutet, die Europa dazu veranlasst, seine Verteidigungspolitik zu überdenken?', type: '綜合理解', skill: '分析', answer: '文件提到了跨大西洋關係的變化，導致歐洲意識到不能再依賴美國。', germanAnswer: 'Das Dokument erwähnt die transatlantischen Beziehungen, die dazu geführt haben, dass Europa verstanden hat, dass es sich nicht mehr auf Amerika verlassen kann.' }
                ]
            }
        },
        {
            day: '第二天',
            title: '「風險」與「速度」的雙重挑戰',
            germanTitle: 'Tag 2: Die doppelten Herausforderungen von "Risiko" und "Tempo"',
            goal: '深入探討新創公司在產品開發中所面臨的「自擔風險」以及對「速度」的追求。',
            germanGoal: 'Ziel: Die Herausforderungen der Start-ups in der Produktentwicklung, insbesondere das "eigene Risiko" und das Streben nach "Tempo", vertiefen.',
            tasks: [
                { type: '聽', description: '聽取文件第二頁，了解為何新創公司必須「自擔風險」開發產品。', german: 'Hören Sie sich die zweite Seite des Dokuments an, um zu verstehen, warum die Start-ups ihre Produkte "auf eigenes Risiko" entwickeln müssen.', example: '他們不等大型開發訂單，而是預測市場需求。' },
                { type: '說', description: '練習用德文說出「我們是自擔風險進行開發」。', german: 'Üben Sie, auf Deutsch zu sagen: "Wir entwickeln auf eigenes Risiko."', example: '"Wir entwickeln auf eigenes Risiko."' },
                { type: '讀', description: '閱讀文件第二頁，找出新創公司與 Hettec 合作開發的產品。', german: 'Lesen Sie die zweite Seite des Dokuments und finden Sie heraus, welches Produkt in Zusammenarbeit mit Hettec entwickelt wurde.', example: '一款高科技無人機。' },
                { type: '寫', description: '寫下「Schnell」這個字對新創公司來說為什麼如此重要。', german: 'Schreiben Sie auf, warum das Wort "schnell" für die Start-ups so wichtig ist.', example: '因為能最快推出創新產品的公司，在潛在的戰爭中具有優勢。' }
            ],
            supplementary: {
                words: [
                    { word: 'Eigenes Risiko', partOfSpeech: 'n.', meaning: '自擔風險', example: 'Wir entwickeln auf eigenes Risiko.' },
                    { word: 'antizipieren', partOfSpeech: 'v.', meaning: '預測', example: 'Wir antizipieren den Bedarf des Marktes.' },
                    { word: 'Innovation', partOfSpeech: 'n.', meaning: '創新', example: 'Wer am schnellsten mit Innovationen aufwarten kann, hat Vorteile.' },
                    { word: 'Tempo', partOfSpeech: 'n.', meaning: '速度', example: 'Tempo ist also bei der Entwicklung gefragt.' },
                    { word: 'Herausforderung', partOfSpeech: 'n.', meaning: '挑戰', example: 'Wir haben die besondere Herausforderung der Zertifizierung.' }
                ],
                phrases: [
                    { phrase: 'mit Innovationen aufwarten', type: '片語', meaning: '提出創新', example: 'Wer am schnellsten mit Innovationen aufwarten kann, hat Vorteile.' },
                    { phrase: 'in Einklang bringen mit', type: '片語', meaning: '使與...一致', example: 'Wir müssen Innovation mit Zertifizierung in Einklang bringen.' },
                    { phrase: 'darauf ausgelegt sein', type: '片語', meaning: '被設計成...', example: 'Prozesse sind nicht darauf ausgelegt, möglichst schnell abzulaufen.' }
                ],
                exercises: [
                    { question: '除了烏克蘭的戰場回饋之外，新創公司還會從哪裡獲得客戶回饋？', german: 'Woher bekommen die Start-ups neben dem Feedback aus der Ukraine noch Kundenfeedback?', type: '細節理解', skill: '理解', answer: '他們會聽取來自安全和國防市場的回饋。', germanAnswer: 'Sie hören auch auf das Feedback aus dem Sicherheits- und Verteidigungsmarkt.' },
                    { question: '新創公司在「創新」與「認證」之間面臨什麼樣的「困境」？', german: 'In welchem "Dilemma" befinden sich die Start-ups zwischen "Innovation" und "Zertifizierung"?', type: '閱讀理解', skill: '理解', answer: '一方面要快速創新，另一方面又要遵守非為「快速」設計的認證標準。', germanAnswer: 'Sie müssen Innovationen schnell schaffen, aber die Zertifizierungsprozesse sind nicht darauf ausgelegt, schnell zu sein.' },
                    { question: '將「追求速度很重要」翻譯成德文。', german: 'Übersetzen Sie "追求速度很重要" ins Deutsche.', type: '德文翻譯', skill: '寫作', answer: 'Tempo ist also gefragt.', germanAnswer: 'Tempo ist also gefragt.' },
                    { question: '請解釋「in Einklang bringen mit」的中文意思。', german: 'Bitte erklären Sie die Bedeutung von "in Einklang bringen mit" auf Chinesisch.', type: '片語解釋', skill: '詞彙', answer: '與...協調一致、調和。', germanAnswer: 'Etwas mit etwas anderem in Einklang bringen oder abstimmen.' }
                ]
            }
        },
        {
            day: '第三天',
            title: '漫長的軍購流程：新創公司的財務困境',
            germanTitle: 'Tag 3: Langwierige Beschaffungsprozesse: Finanzielle Engpässe für Start-ups',
            goal: '分析德國軍方漫長的採購流程如何對新創公司的財務和生存造成威脅。',
            germanGoal: 'Ziel: Analysieren, wie die langwierigen Beschaffungsprozesse der Bundeswehr die finanzielle Situation und das Überleben von Start-ups gefährden.',
            tasks: [
                { type: '聽', description: '聽取文件第二頁和第三頁，了解德國軍方的採購流程有多長。', german: 'Hören Sie sich die zweite und dritte Seite des Dokuments an, um herauszufinden, wie lange die Beschaffungsprozesse bei der Bundeswehr dauern.', example: '從招標到購買可能需要好幾年。' },
                { type: '說', description: '練習用德文向投資者解釋這個問題：「德國軍方採購太慢了」。', german: 'Üben Sie, einem Investor auf Deutsch das Problem zu erklären: "Die Beschaffung bei der Bundeswehr ist zu langsam."', example: '"Bei der Bundeswehr vergehen von der Ausschreibung bis zum Kauf teilweise mehrere Jahre."' },
                { type: '讀', description: '閱讀文件第三頁，找出這個問題對新創公司財務狀況的具體影響。', german: 'Lesen Sie die dritte Seite des Dokuments und identifizieren Sie die konkreten Auswirkungen dieses Problems auf die Finanzen der Start-ups.', example: '在等待期間，新創公司無法產生收入，也難以說服潛在投資者繼續投資。' },
                { type: '寫', description: '寫下為什麼德國軍方（Bundeswehr）是新創公司的「第一買家」。', german: 'Schreiben Sie auf, warum die Bundeswehr "in der Regel der erste Käufer" für diese Start-ups ist.', example: '因為這些是專門為軍事用途開發的產品，只有軍方會採購。' }
            ],
            supplementary: {
                words: [
                    { word: 'Ausschreibung', partOfSpeech: 'n.', meaning: '招標', example: 'Von der Ausschreibung bis zum Kauf vergehen Jahre.' },
                    { word: 'aufstrebend', partOfSpeech: 'adj.', meaning: '有前途的、新興的', example: 'Das ist schlecht für aufstrebende Start-ups.' },
                    { word: 'Spitzentechnologie', partOfSpeech: 'n.', meaning: '尖端技術', example: 'Ein Start-up kann mit innovativer Spitzentechnologie pleitegehen.' },
                    { word: 'Einkommen', partOfSpeech: 'n.', meaning: '收入', example: 'Das Start-up kann in dieser Zeit kein Einkommen generieren.' },
                    { word: 'potenziell', partOfSpeech: 'adj.', meaning: '潛在的', example: 'Es kann potenzielle Investoren nicht überzeugen.' }
                ],
                phrases: [
                    { phrase: 'das Geld ausgehen', type: '慣用語', meaning: '錢用完、破產', example: 'Einem Start-up kann das Geld ausgehen.' },
                    { phrase: 'jdn. überzeugen', type: '片語', meaning: '說服某人', example: 'Es kann potenzielle Investoren nicht überzeugen.' },
                    { phrase: 'neue Wege beschreiten', type: '慣用語', meaning: '開創新路', example: 'Wir müssen jetzt neue Wege beschreiten.' }
                ],
                exercises: [
                    { question: '「Bundeswehr」的中文意思是什麼？', german: 'Was bedeutet "Bundeswehr" auf Chinesisch?', type: '詞彙', skill: '理解', answer: '德國聯邦國防軍。', germanAnswer: 'Die deutsche Bundeswehr.' },
                    { question: '根據文件，為什麼新創公司在等待德國軍方採購期間，難以獲得更多投資？', german: 'Warum fällt es den Start-ups schwer, in der Wartezeit auf die Beschaffung der Bundeswehr weitere Investitionen zu erhalten?', type: '閱讀理解', skill: '理解', answer: '因為他們無法產生收入，這使得他們無法說服投資者繼續提供資金。', germanAnswer: 'Weil sie in dieser Zeit kein Einkommen generieren können, was es ihnen schwer macht, potenzielle Investoren zu überzeugen, weiter Geld zu geben.' },
                    { question: '將「德國軍隊的採購程序需要好幾年」翻譯成德文。', german: 'Übersetzen Sie "德國軍隊的採購程序需要好幾年" ins Deutsche.', type: '德文翻譯', skill: '寫作', answer: 'Bei der Bundeswehr vergehen von der Ausschreibung bis zum Kauf teilweise mehrere Jahre.', germanAnswer: 'Bei der Bundeswehr vergehen von der Ausschreibung bis zum Kauf teilweise mehrere Jahre.' },
                    { question: '你認為政府可以如何改善採購流程，以支持這些創新公司？', german: 'Wie könnte die Regierung Ihrer Meinung nach den Beschaffungsprozess verbessern, um innovative Unternehmen zu unterstützen?', type: '延伸思考', skill: '批判性思考', answer: '（開放式問題，提供德文答案範例）', germanAnswer: 'Die Regierung könnte beispielsweise Pilotprojekte mit verkürzten Fristen einführen, um innovative Produkte schneller zu testen und zu evaluieren.' }
                ]
            }
        },
        {
            day: '第四天',
            title: '「歐洲製造」的呼籲與策略',
            germanTitle: 'Tag 4: Der Ruf nach "Made in European Union" und die Strategie dahinter',
            goal: '理解為何文件強調國防產品應「德國製造」或「歐洲製造」，並分析其背後的戰略考量。',
            germanGoal: 'Ziel: Verstehen, warum das Dokument betont, dass Rüstungsprodukte "Made in Germany" oder "Made in European Union" sein sollten, und die strategischen Überlegungen dahinter analysieren.',
            tasks: [
                { type: '聽', description: '聽取文件第三頁，找出為何供應鏈來自歐洲以外會帶來問題。', german: 'Hören Sie sich die dritte Seite des Dokuments an, um zu verstehen, warum Teile von außerhalb Europas problematisch sein können.', example: '當發生衝突時，這會變得不妙。' },
                { type: '說', description: '練習用德文說出「我們不能依賴那些我們視為戰略對手的國家」。', german: 'Üben Sie, auf Deutsch zu sagen: "Wir dürfen nicht von Ländern abhängig sein, die wir als strategische Widersacher einordnen."', example: '"Wir dürfen gerade, was unsere Verteidigung angeht, nicht abhängig sein von Ländern, die wir eigentlich jetzt schon als strategische Widersacher einordnen."' },
                { type: '讀', description: '閱讀文件第三頁，找出解決這個問題的具體要求。', german: 'Lesen Sie die dritte Seite des Dokuments und identifizieren Sie die konkrete Forderung zur Lösung dieses Problems.', example: '必須盡快確保關鍵的基礎設施和生產設施設在歐洲。' },
                { type: '寫', description: '寫下「kurzsichtig」這個詞的中文意思，並解釋其在上下文中的含義。', german: 'Schreiben Sie die Bedeutung des Wortes "kurzsichtig" auf Chinesisch auf und erklären Sie seine Bedeutung im Kontext.', example: 'kurzsichtig 的意思是「短視近利」，文件認為依賴非歐洲國家是短視的。' }
            ],
            supplementary: {
                words: [
                    { word: 'abhängig', partOfSpeech: 'adj.', meaning: '依賴的', example: 'Wir dürfen nicht abhängig sein von anderen Ländern.' },
                    { word: 'Widersacher', partOfSpeech: 'n.', meaning: '對手、敵人', example: 'Wir stufen sie als strategische Widersacher ein.' },
                    { word: 'fatal', partOfSpeech: 'adj.', meaning: '致命的、災難性的', example: 'Das wäre fatal und das ist kurzsichtig.' },
                    { word: 'kurzsichtig', partOfSpeech: 'adj.', meaning: '短視的', example: 'Das ist eine kurzsichtige Entscheidung.' },
                    { word: 'Infrastruktur', partOfSpeech: 'n.', meaning: '基礎設施', example: 'Die entscheidende Infrastruktur muss in Europa liegen.' }
                ],
                phrases: [
                    { phrase: 'Nachholbedarf haben', type: '片語', meaning: '有追趕的需求', example: 'Hier gibt es Nachholbedarf.' },
                    { phrase: 'in Europa legen', type: '片語', meaning: '設在歐洲', example: 'Die Produktion muss in Europa gelegt werden.' },
                    { phrase: 'strategisch einordnen', type: '片語', meaning: '進行戰略定位', example: 'Wir müssen die Länder strategisch einordnen.' }
                ],
                exercises: [
                    { question: '根據文件，為什麼國防產品的零件不應來自歐洲以外？', german: 'Warum sollten laut dem Dokument Teile für Rüstungsgüter nicht von außerhalb Europas kommen?', type: '細節理解', skill: '理解', answer: '因為當發生衝突時，這會產生問題，且會讓我們依賴戰略對手。', germanAnswer: 'Weil das im Falle von Konflikten problematisch sein kann und uns von strategischen Widersachern abhängig macht.' },
                    { question: '將「我們必須盡快確保關鍵的生產設施設在歐洲」翻譯成德文。', german: 'Übersetzen Sie "我們必須盡快確保關鍵的生產設施設在歐洲" ins Deutsche.', type: '德文翻譯', skill: '寫作', answer: 'Wir müssen schnellstmöglich sicherstellen, dass die entscheidende Produktion in Europa gelegt ist.', germanAnswer: 'Wir müssen schnellstmöglich sicherstellen, dass die entscheidende Produktion in Europa gelegt ist.' },
                    { question: '請解釋「Nachholbedarf haben」的中文意思。', german: 'Bitte erklären Sie die Bedeutung von "Nachholbedarf haben" auf Chinesisch.', type: '片語解釋', skill: '詞彙', answer: '有追趕的需求。', germanAnswer: 'Es gibt einen Aufholbedarf.' },
                    { question: '你認為「歐洲製造」的國防產品對於強化歐洲的自主防禦能力有什麼幫助？', german: 'Wie kann "Made in European Union" die Autonomie der europäischen Verteidigung stärken?', type: '延伸思考', skill: '批判性思考', answer: '（開放式問題，提供德文答案範例）', germanAnswer: 'Eine europäische Produktion verringert die Abhängigkeit von externen Lieferanten, sichert die Lieferketten in Krisenzeiten und stärkt die technologische Souveränität des Kontinents.' }
                ]
            }
        },
        {
            day: '第五天',
            title: '人工智慧與創新連結的未來',
            germanTitle: 'Tag 5: Die Zukunft der Vernetzung mit künstlicher Intelligenz',
            goal: '了解未來國防技術的發展方向，特別是人工智慧如何與各種創新連結。',
            germanGoal: 'Ziel: Die zukünftige Entwicklung der Verteidigungstechnologie verstehen, insbesondere wie künstliche Intelligenz Innovationen miteinander verbindet.',
            tasks: [
                { type: '聽', description: '聽取文件第三頁後半部，找出未來創新的發展趨勢。', german: 'Hören Sie sich den zweiten Teil der dritten Seite an, um den zukünftigen Trend bei Innovationen herauszufinden.', example: '未來的趨勢是將個別創新與人工智慧連結。' },
                { type: '說', description: '練習用德文說出「藉由人工智慧連結創新，會讓它們更具危險性」。', german: 'Üben Sie, auf Deutsch zu sagen: "Durch die Vernetzung mit KI wären sie noch gefährlicher."', example: '"In Zukunft geht es auch darum, die einzelnen Innovationen zu vernetzen mit Hilfe von künstlicher Intelligenz. So wären sie noch gefährlicher."' },
                { type: '讀', description: '閱讀文件第四頁，找出這個趨勢對德國新創公司帶來的影響。', german: 'Lesen Sie die vierte Seite des Dokuments und identifizieren Sie die Auswirkungen dieses Trends auf deutsche Start-ups.', example: '這讓德國新創公司面臨更多挑戰。' },
                { type: '寫', description: '寫下你認為人工智慧在國防領域還有哪些應用可能性。', german: 'Schreiben Sie auf, welche weiteren Anwendungsmöglichkeiten Sie für künstliche Intelligenz im Verteidigungsbereich sehen.', example: 'AI 可以用於戰場分析、目標識別或自動化防禦系統。' }
            ],
            supplementary: {
                words: [
                    { word: 'vernetzen', partOfSpeech: 'v.', meaning: '連結、網路化', example: 'Es geht darum, die Innovationen zu vernetzen.' },
                    { word: 'künstliche Intelligenz', partOfSpeech: 'n.', meaning: '人工智慧', example: 'mit Hilfe von künstlicher Intelligenz.' },
                    { word: 'gefährlich', partOfSpeech: 'adj.', meaning: '危險的', example: 'So wären sie noch gefährlicher.' },
                    { word: 'herausfordernd', partOfSpeech: 'adj.', meaning: '具有挑戰性的', example: 'Macht alles für die Startups noch herausfordernder.' },
                    { word: 'Zukunft', partOfSpeech: 'n.', meaning: '未來', example: 'In Zukunft geht es auch um die Vernetzung.' }
                ],
                phrases: [
                    { phrase: 'mit Hilfe von', type: '片語', meaning: '藉由...的幫助', example: 'Die Innovationen werden mit Hilfe von KI vernetzt.' },
                    { phrase: 'es geht darum', type: '片語', meaning: '重點在於', example: 'In Zukunft geht es auch darum, die Innovationen zu vernetzen.' },
                    { phrase: 'noch herausfordernder machen', type: '片語', meaning: '變得更具挑戰性', example: 'Das macht alles noch herausfordernder.' }
                ],
                exercises: [
                    { question: '將「人工智慧能連結個別創新」翻譯成德文。', german: 'Übersetzen Sie "人工智慧能連結個別創新" ins Deutsche.', type: '德文翻譯', skill: '寫作', answer: 'Künstliche Intelligenz kann die einzelnen Innovationen vernetzen.', germanAnswer: 'Künstliche Intelligenz kann die einzelnen Innovationen vernetzen.' },
                    { question: '這份文件如何看待人工智慧與國防創新的結合？', german: 'Wie wird die Kombination von KI und Verteidigungsinnovationen in dem Dokument dargestellt?', type: '綜合理解', skill: '分析', answer: '這被視為一種趨勢，但同時也讓產品更具危險性，並為新創公司帶來更多挑戰。', germanAnswer: 'Sie wird als Trend gesehen, macht die Produkte aber auch gefährlicher und stellt die Start-ups vor noch größere Herausforderungen.' },
                    { question: '請解釋「noch gefährlicher」的中文意思。', german: 'Bitte erklären Sie die Bedeutung von "noch gefährlicher" auf Chinesisch.', type: '片語解釋', skill: '詞彙', answer: '變得更危險。', germanAnswer: 'Noch gefährlicher.' },
                    { question: '你認為科技公司在發展國防人工智慧時，應該考慮哪些道德問題？', german: 'Welche ethischen Fragen sollten Technologieunternehmen bei der Entwicklung von KI im Verteidigungsbereich berücksichtigen?', type: '延伸思考', skill: '批判性思考', answer: '（開放式問題，提供德文答案範例）', germanAnswer: 'Ethische Fragen wie die Autonomie von Waffensystemen, die Verantwortung für Entscheidungen, die von KI getroffen werden, und die potenzielle Eskalation von Konflikten müssen berücksichtigt werden.' }
                ]
            }
        },
        {
            day: '第六天',
            title: '綜合分析與總結回顧',
            germanTitle: 'Tag 6: Umfassende Analyse und Rekapitulation',
            goal: '回顧前五天的學習內容，並綜合分析德國國防新創公司所面臨的機會與挑戰。',
            germanGoal: 'Ziel: Die Lerninhalte der ersten fünf Tage rekapitulieren und die Chancen und Herausforderungen für deutsche Rüstungs-Start-ups umfassend analysieren.',
            tasks: [
                { type: '聽', description: '完整地再聽一次音訊，將新學到的單字和片語應用到聆聽理解中。', german: 'Hören Sie das gesamte Audio noch einmal an und wenden Sie die neu gelernten Vokabeln und Phrasen beim Verstehen an.', example: '我現在能更清楚地聽懂新創公司面臨的困境。' },
                { type: '說', description: '練習用德文簡述德國國防新創公司的優勢與劣勢。', german: 'Üben Sie, auf Deutsch die Stärken und Schwächen der deutschen Rüstungs-Start-ups kurz zusammenzufassen.', example: 'Ihre Stärke ist die Innovation, aber ihre Schwäche ist der langsame Beschaffungsprozess der Bundeswehr.' },
                { type: '讀', description: '再次瀏覽文件，將不同頁面的內容聯繫起來，形成一個完整的脈絡。', german: 'Lesen Sie das Dokument nochmals durch und vernetzen Sie die Inhalte der verschiedenen Seiten zu einem vollständigen Kontext.', example: '投資者的擔憂與軍方的採購速度有直接關聯。' },
                { type: '寫', description: '寫一篇短文，探討德國國防新創公司如何才能在國際競爭中脫穎而出。', german: 'Schreiben Sie einen kurzen Aufsatz, in dem Sie diskutieren, wie deutsche Rüstungs-Start-ups im internationalen Wettbewerb bestehen können.', example: 'Sie müssen sowohl schnell innovative Produkte entwickeln als auch neue Wege finden, um die Finanzierung zu sichern.' }
            ],
            supplementary: {
                words: [
                    { word: 'Wettbewerb', partOfSpeech: 'n.', meaning: '競爭', example: 'Sie müssen sich im internationalen Wettbewerb behaupten.' },
                    { word: 'Chancen', partOfSpeech: 'n. (pl.)', meaning: '機會', example: 'Start-ups sehen Chancen in unsicheren Zeiten.' },
                    { word: 'sicherstellen', partOfSpeech: 'v.', meaning: '確保', example: 'Wir müssen sicherstellen, dass die Produktion in Europa liegt.' },
                    { word: 'Hintergrund', partOfSpeech: 'n.', meaning: '背景', example: 'Der Hintergrund der Krise sind die transatlantischen Beziehungen.' },
                    { word: 'Zusammenhang', partOfSpeech: 'n.', meaning: '關聯、上下文', example: 'Ich sehe den Zusammenhang zwischen den Problemen.' }
                ],
                phrases: [
                    { phrase: 'sich einen Überblick verschaffen', type: '片語', meaning: '獲得一個總體概述', example: 'Ich habe mir einen Überblick über das Thema verschafft.' },
                    { phrase: 'insgesamt', type: '副詞', meaning: '總體來說', example: 'Insgesamt ist die Situation herausfordernd.' },
                    { phrase: 'im Vergleich zu', type: '片語', meaning: '與...相比', example: 'Im Vergleich zu anderen Ländern hat Deutschland Nachholbedarf.' }
                ],
                exercises: [
                    { question: '總結德國國防新創公司的三個主要挑戰。', german: 'Fassen Sie die drei Haupt-Herausforderungen für deutsche Rüstungs-Start-ups zusammen.', type: '總結', skill: '綜合', answer: '冗長的軍購流程、依賴歐洲以外的供應鏈，以及將創新與 AI 結合的技術挑戰。', germanAnswer: 'Langwierige Beschaffungsprozesse, die Abhängigkeit von außereuropäischen Lieferketten und die Herausforderung, Innovationen mit KI zu vernetzen.' },
                    { question: '將「這個問題的解決方案是建立一個歐洲供應鏈」翻譯成德文。', german: 'Übersetzen Sie "這個問題的解決方案是建立一個歐洲供應鏈" ins Deutsche.', type: '德文翻譯', skill: '寫作', answer: 'Die Lösung für dieses Problem ist die Schaffung einer europäischen Lieferkette.', germanAnswer: 'Die Lösung für dieses Problem ist die Schaffung einer europäischen Lieferkette.' },
                    { question: '你認為哪些國際事件促使歐洲開始尋求國防自主？', german: 'Welche internationalen Ereignisse könnten Europa dazu veranlasst haben, mehr Verteidigungsautonomie anzustreben?', type: '延伸思考', skill: '批判性思考', answer: '（開放式問題，提供德文答案範例）', germanAnswer: 'Der Ukraine-Krieg und die veränderten transatlantischen Beziehungen haben gezeigt, dass Europa seine Verteidigung auf eigenen Beinen stehen muss.' },
                    { question: '請解釋「strategische Widersacher」的中文意思。', german: 'Bitte erklären Sie die Bedeutung von "strategische Widersacher" auf Chinesisch.', type: '片語解釋', skill: '詞彙', answer: '戰略對手。', germanAnswer: 'Strategische Gegenspieler.' }
                ]
            }
        },
        {
            day: '第七天',
            title: '全面回顧與個人觀點反思',
            germanTitle: 'Tag 7: Umfassende Überprüfung und persönliche Reflexion',
            goal: '回顧所有學習內容，形成對德國國防新創公司議題的個人觀點，並能以德文進行闡述。',
            germanGoal: 'Ziel: Alle Lerninhalte rekapitulieren, eine persönliche Meinung zum Thema der deutschen Rüstungs-Start-ups entwickeln und diese auf Deutsch formulieren können.',
            tasks: [
                { type: '聽', description: '完整地再聽一次音訊，檢查是否所有細節都能理解。', german: 'Hören Sie das Audio noch einmal komplett an und überprüfen Sie, ob Sie alle Details verstehen können.', example: '我現在可以不看文字稿就聽懂大部分內容。' },
                { type: '說', description: '整理自己的所有觀點，練習向他人介紹這個議題，並回答可能的問題。', german: 'Strukturieren Sie Ihre eigenen Argumente und üben Sie, das Thema zu präsentieren und mögliche Fragen zu beantworten.', example: '"Die größte Herausforderung für die deutschen Start-ups ist die Bürokratie der Bundeswehr und die Abhängigkeit der Lieferketten."' },
                { type: '讀', description: '再次瀏覽文件，特別關注那些在學習初期不熟悉的詞彙或句子，並反思其意義。', german: 'Überfliegen Sie das Dokument erneut und konzentrieren Sie sich dabei auf Vokabeln und Sätze, die Ihnen zu Beginn unbekannt waren.', example: '例如：Rüstungsindustrie, Ausschreibung, kurzsichtig。' },
                { type: '寫', description: '寫一篇綜合報告，總結整個學習計畫的收穫，並闡述你對德國國防產業未來發展的看法和建議。', german: 'Schreiben Sie einen umfassenden Bericht, in dem Sie die Lernergebnisse der gesamten Woche zusammenfassen und Ihre Ansichten und Vorschläge zur Zukunft der deutschen Rüstungsindustrie darlegen.', example: '經過這七天的學習，我認為德國新創公司在技術上具有優勢，但需要政府在政策上提供更多支持。' }
            ],
            supplementary: {
                words: [
                    { word: 'Reflexion', partOfSpeech: 'n.', meaning: '反思', example: 'Eine gründliche Reflexion ist für das Lernen wichtig.' },
                    { word: 'Perspektive', partOfSpeech: 'n.', meaning: '觀點', example: 'Ich habe eine neue Perspektive auf das Thema gewonnen.' },
                    { word: 'Maßnahmen', partOfSpeech: 'n. (pl.)', meaning: '措施', example: 'Es müssen effektive Maßnahmen ergriffen werden.' },
                    { word: 'Autonomie', partOfSpeech: 'n.', meaning: '自主權', example: 'Die europäische Verteidigungsautonomie ist wichtig.' },
                    { word: 'nachhaltig', partOfSpeech: 'adj.', meaning: '永續的', example: 'Wir brauchen eine nachhaltige Strategie.' }
                ],
                phrases: [
                    { phrase: 'unter die Lupe nehmen', type: '慣用語', meaning: '仔細審查', example: 'Wir müssen die Probleme unter die Lupe nehmen.' },
                    { phrase: 'im Allgemeinen', type: '副詞', meaning: '一般來說', example: 'Im Allgemeinen sind die Aussichten gut, aber es gibt Risiken.' },
                    { phrase: 'Handlungsbedarf sehen', type: '片語', meaning: '認為有必要採取行動', example: 'Die Regierung sieht Handlungsbedarf.' }
                ],
                exercises: [
                    { question: '請用一句話總結你對德國國防新創公司所面臨的最大困境的理解。', german: 'Fassen Sie Ihr Verständnis des größten Dilemmas für deutsche Rüstungs-Start-ups in einem Satz zusammen.', type: '總結', skill: '綜合', answer: '（開放式問題，提供德文答案範例）', germanAnswer: 'Das größte Dilemma besteht darin, dass innovative Start-ups durch langwierige staatliche Beschaffungsprozesse in finanzielle Engpässe geraten und so ihre Wettbewerbsfähigkeit verlieren könnten.' },
                    { question: '你認為這份文件主要是在表達哪種情緒？', german: 'Welche Stimmung vermittelt das Dokument Ihrer Meinung nach hauptsächlich?', type: '語氣分析', skill: '分析', answer: '（開放式問題，提供德文答案範例）', germanAnswer: 'Das Dokument vermittelt eine besorgte, aber auch lösungsorientierte Stimmung. Es hebt die Probleme hervor, zeigt aber auch, dass es neue Wege und Chancen gibt.' },
                    { question: '將「我們必須為未來做準備」翻譯成德文。', german: 'Übersetzen Sie "我們必須為未來做準備" ins Deutsche.', type: '德文翻譯', skill: '寫作', answer: 'Wir müssen uns auf die Zukunft vorbereiten.', germanAnswer: 'Wir müssen uns auf die Zukunft vorbereiten.' }
                ],
                summary: `
                    <div className="p-4 bg-purple-50 rounded-lg border border-purple-200 mt-6">
                        <h4 className="text-lg font-bold text-gray-700 mb-2">總結摘要 (Zusammenfassung)</h4>
                        <p className="text-gray-800 leading-relaxed">
                            Deutsche Rüstungs-Start-ups haben in letzter Zeit viel Aufmerksamkeit und über eine Milliarde Euro von Privatinvestoren erhalten. Sie entwickeln innovative Produkte wie Mini-Panzer und Hightech-Drohnen. Doch trotz dieser Innovationen stehen sie vor erheblichen Herausforderungen. Das größte Problem ist der extrem langsame Beschaffungsprozess der Bundeswehr, der oft mehrere Jahre dauert. In dieser Zeit können die jungen Unternehmen kein Einkommen generieren und haben Schwierigkeiten, Investoren zu überzeugen, weiterhin zu finanzieren. Des Weiteren wird im Dokument die Notwendigkeit betont, die Abhängigkeit von außereuropäischen Lieferketten zu verringern, um in Krisenzeiten technologisch autonom zu sein. Es wird gefordert, dass die Produktion in Europa gesichert wird, um nicht von strategischen Widersachern abhängig zu sein. Die Zukunft liegt in der Vernetzung dieser Innovationen durch künstliche Intelligenz, was die Start-ups vor noch größere Herausforderungen stellt, aber auch neue Möglichkeiten eröffnet. Es bedarf einer klaren Strategie und schnellerer Prozesse, um diese Potenziale voll auszuschöpfen.
                        </p>
                    </div>
                `
            }
        },
    ];

    const toggleExerciseAnswer = (dayIndex, exerciseIndex) => {
        setOpenExercises(prev => ({
            ...prev,
            [`${dayIndex}-${exerciseIndex}`]: !prev[`${dayIndex}-${exerciseIndex}`]
        }));
    };

    // Mapping for Lucide icons
    const iconMap = {
        'listen': <Mic className="w-6 h-6" />,
        'speak': <MessageSquare className="w-6 h-6" />,
        'read': <Book className="w-6 h-6" />,
        'write': <Pen className="w-6 h-6" />,
        'vocab': <Lightbulb className="w-6 h-6" />,
        'phrases': <Zap className="w-6 h-6" />,
        'exercises': <CheckSquare className="w-6 h-6" />,
        'summary': <Award className="w-6 h-6" />
    };

    const DayContent = ({ dayData, dayIndex, toggleAnswer, openExercises }) => {
        return (
            <div>
                {/* Day Header and Goal Card */}
                <div className="bg-white p-6 md:p-8 mb-6 border border-gray-200 rounded-3xl shadow-md">
                    <h3 className="text-2xl font-bold text-gray-800 mb-1">{dayData.day}: {dayData.title}</h3>
                    <p className="text-sm text-gray-600 mb-4">{dayData.germanTitle}</p>
                    <div className="p-4 bg-blue-50 rounded-lg border border-blue-200">
                        <p className="text-lg font-medium text-gray-700">{dayData.goal}</p>
                        <p className="text-xs text-gray-500 mt-1">{dayData.germanGoal}</p>
                    </div>
                </div>

                {/* Daily Tasks Section */}
                <div className="bg-white p-6 md:p-8 mb-6 border border-gray-200 rounded-3xl shadow-md">
                    <div className="flex items-center gap-4 mb-4">
                        <div className="w-12 h-12 flex items-center justify-center rounded-full text-white bg-teal-500 shadow-lg">
                            {iconMap['exercises']}
                        </div>
                        <div>
                            <p className="text-xl font-semibold text-gray-800">每日任務</p>
                            <p className="text-sm text-gray-500">(Tagesaufgaben)</p>
                        </div>
                    </div>
                    <ul className="list-disc list-inside space-y-4 text-gray-700">
                        {dayData.tasks.map((task, idx) => (
                            <li key={idx}>
                                <strong className="text-gray-800">{task.type}:</strong> {task.description}
                                <span className="block text-sm text-gray-500 italic mt-1">{task.german}</span>
                            </li>
                        ))}
                    </ul>
                </div>

                {/* Supplementary Content - Words & Phrases */}
                <div className="grid md:grid-cols-2 gap-6 mb-6">
                    {dayData.supplementary.words && dayData.supplementary.words.length > 0 && (
                        <div className="bg-white p-6 border border-gray-200 rounded-3xl shadow-md">
                            <div className="flex items-center gap-4 mb-4">
                                <div className="w-12 h-12 flex items-center justify-center rounded-full text-white bg-blue-500 shadow-lg">
                                    {iconMap['vocab']}
                                </div>
                                <div>
                                    <p className="text-xl font-semibold text-gray-800">單字卡</p>
                                    <p className="text-sm text-gray-500">(Vokabelkarten)</p>
                                </div>
                            </div>
                            <ul className="space-y-3 text-gray-700">
                                {dayData.supplementary.words.map((word, idx) => (
                                    <li key={idx}>
                                        <strong className="text-gray-800">{word.word}</strong> ({word.partOfSpeech}) - {word.meaning}
                                        <span className="block text-sm italic ml-4 text-gray-500">例句: {word.example}</span>
                                    </li>
                                ))}
                            </ul>
                        </div>
                    )}
                    {dayData.supplementary.phrases && dayData.supplementary.phrases.length > 0 && (
                        <div className="bg-white p-6 border border-gray-200 rounded-3xl shadow-md">
                            <div className="flex items-center gap-4 mb-4">
                                <div className="w-12 h-12 flex items-center justify-center rounded-full text-white bg-purple-500 shadow-lg">
                                    {iconMap['phrases']}
                                </div>
                                <div>
                                    <p className="text-xl font-semibold text-gray-800">片語與慣用語</p>
                                    <p className="text-sm text-gray-500">(Redewendungen)</p>
                                </div>
                            </div>
                            <ul className="space-y-3 text-gray-700">
                                {dayData.supplementary.phrases.map((phrase, idx) => (
                                    <li key={idx}>
                                        <strong className="text-gray-800">{phrase.phrase}</strong> ({phrase.type}) - {phrase.meaning}
                                        <span className="block text-sm italic ml-4 text-gray-500">例句: {phrase.example}</span>
                                    </li>
                                ))}
                            </ul>
                        </div>
                    )}
                </div>

                {/* Exercises Section */}
                {dayData.supplementary.exercises && dayData.supplementary.exercises.length > 0 && (
                    <div className="bg-white p-6 md:p-8 mb-6 border border-gray-200 rounded-3xl shadow-md">
                        <div className="flex items-center gap-4 mb-4">
                            <div className="w-12 h-12 flex items-center justify-center rounded-full text-white bg-orange-500 shadow-lg">
                                {iconMap['exercises']}
                            </div>
                            <div>
                                <p className="text-xl font-semibold text-gray-800">練習題</p>
                                <p className="text-sm text-gray-500">(Übungsaufgaben)</p>
                            </div>
                        </div>
                        <div className="space-y-4">
                            {dayData.supplementary.exercises.map((exercise, idx) => (
                                <div key={idx} className="bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200">
                                    <p className="font-medium text-gray-800">{idx + 1}. {exercise.question}</p>
                                    <span className="block text-sm text-gray-500 italic mt-1">{exercise.german}</span>
                                    <p className="text-xs text-gray-400 mt-1">題型: {exercise.type} / 能力指標: {exercise.skill}</p>
                                    <div
                                        className={`mt-2 p-4 rounded-lg bg-yellow-50 border-l-4 border-yellow-400 transition-all duration-300 ${openExercises[`${dayIndex}-${idx}`] ? 'block' : 'hidden'}`}
                                    >
                                        <strong className="text-sm text-gray-700">答案:</strong>
                                        <span className="block text-sm text-gray-800">{exercise.answer}</span>
                                        <span className="block text-sm italic text-gray-500">{exercise.germanAnswer}</span>
                                    </div>
                                    <button
                                        onClick={() => toggleExerciseAnswer(dayIndex, idx)}
                                        className="mt-2 py-2 px-4 bg-gray-200 text-gray-700 text-sm font-medium rounded-full hover:bg-gray-300 transition-colors"
                                    >
                                        {openExercises[`${dayIndex}-${idx}`] ? '隱藏參考答案' : '顯示參考答案'}
                                    </button>
                                </div>
                            ))}
                        </div>
                    </div>
                )}
                {/* Summary section, only for Day 7 */}
                {dayIndex === 6 && dayData.supplementary.summary && (
                    <div className="bg-white p-6 md:p-8 mb-6 border border-gray-200 rounded-3xl shadow-md">
                        <div className="flex items-center gap-4 mb-4">
                            <div className="w-12 h-12 flex items-center justify-center rounded-full text-white bg-red-500 shadow-lg">
                                {iconMap['summary']}
                            </div>
                            <div>
                                <p className="text-xl font-semibold text-gray-800">總結摘要</p>
                                <p className="text-sm text-gray-500">(Zusammenfassung)</p>
                            </div>
                        </div>
                        <div dangerouslySetInnerHTML={{ __html: dayData.supplementary.summary }} />
                    </div>
                )}
            </div>
        );
    };

    return (
        <div className="p-4 md:p-8 bg-gray-100 min-h-screen">
            <div className="container mx-auto bg-white rounded-3xl shadow-xl p-6 md:p-10 border border-gray-100 relative">
                
                {/* Navigation links in top corners */}
                <a href="#" className="absolute top-6 left-6 text-gray-600 hover:text-blue-600 transition-colors duration-300 z-10">
                    <ArrowLeft className="w-8 h-8"/>
                </a>
                <a href="next-page.html" className="absolute top-6 right-6 text-gray-600 hover:text-blue-600 transition-colors duration-300 z-10">
                    <ArrowRight className="w-8 h-8"/>
                </a>
                
                <header className="text-center mb-6">
                    <h1 className="text-3xl md:text-4xl font-bold text-gray-800 mb-2">德國國防產業新創公司</h1>
                    <h2 className="text-lg md:text-xl text-gray-600 font-medium">(Start-ups in der Rüstungsindustrie)</h2>
                </header>

                <div className="mb-6 text-center flex flex-col items-center">
                    {/* Audio Player */}
                    <audio controls className="w-full max-w-lg bg-gray-100 rounded-xl p-2 mb-4 shadow-md">
                        <source src="https://learngerman.dw.com/de/start-ups-in-der-r%C3%BCstungsindustrie/l-73548174" type="audio/mpeg" />
                        您的瀏覽器不支援音訊元素。
                    </audio>
                    {/* Audio Source Link */}
                    <a href="https://learngerman.dw.com/de/start-ups-in-der-r%C3%BCstungsindustrie/l-73548174" target="_blank" rel="noopener noreferrer" className="inline-block bg-orange-500 text-white font-bold py-2 px-4 rounded-full shadow-lg hover:bg-orange-600 transition-colors duration-300 transform hover:scale-105 text-sm">
                        音訊來源：Deutsche Welle
                    </a>
                </div>

                {/* Day Selector */}
                <div className="flex flex-wrap justify-center gap-2 mb-8">
                    {learningPlanData.map((_, index) => (
                        <button
                            key={index}
                            onClick={() => setCurrentDayIndex(index)}
                            className={`py-2 px-4 rounded-full text-sm font-medium transition-colors duration-300 ${
                                index === currentDayIndex ? 'bg-blue-600 text-white shadow-md' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                            }`}
                        >
                            {`第${index + 1}天`}
                        </button>
                    ))}
                </div>

                <main id="learning-plan-container">
                    <DayContent
                        dayData={learningPlanData[currentDayIndex]}
                        dayIndex={currentDayIndex}
                        toggleAnswer={toggleExerciseAnswer}
                        openExercises={openExercises}
                    />
                </main>
            </div>
        </div>
    );
}
